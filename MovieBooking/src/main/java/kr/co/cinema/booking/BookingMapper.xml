<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.cinema.booking.BookingMapper">

  <!-- ajax 영화+지점+날짜에 맞는 상영일정 가져오기 -->
  <select id="SelectListScreenInfo" resultType="kr.co.cinema.dto.ScreenSchedule" parameterType="kr.co.cinema.dto.Movie">
	SELECT 
		SCREEN_SCHEDULE.scs_code as scsCode,
		SCREEN_SCHEDULE.scs_startTime as scsStartTime,
		SCREEN_SCHEDULE.scs_timeDiscount as scsTimeDiscount
	FROM
		SCREEN_SCHEDULE
	WHERE
		SCREEN_SCHEDULE.mov_code = #{movCode} &amp;&amp; 
		SCREEN_SCHEDULE.brc_code = #{brcCode} &amp;&amp; 
		SCREEN_SCHEDULE.scs_date = #{Date};
  </select>
  
  <!-- 영화 예매페이지에서 나타낼 현재 상영중인 영화가 있는 날짜 조회 -->
  <select id="selectListDate" resultType="String">
	SELECT DISTINCT 
		SCREEN_SCHEDULE.scs_date
	FROM
		SCREEN_SCHEDULE
	WHERE
		scs_date>now()
	ORDER BY
		scs_date ASC
  </select>
  
  <!-- 영화 예매페이지에서 나타낼 현재 상영중인 영화 조회 -->
  <select id="selectListMovie" resultType="kr.co.cinema.dto.Movie">
	SELECT
		MOVIE.mov_code as movCode,
		MOVIE.mov_korName as movKorName,
		MOVIE.mov_grade as movGrade
	FROM
		MOVIE
	WHERE
		MOVIE.mov_status='상영중';  
  </select>
  
  <!-- 영화 예매페이지에서 나타낼 현재 상영중인 지점 조회 -->
  <select id="selectListBranch" resultType="kr.co.cinema.dto.Branch">
	SELECT
		BRANCH.brc_code as brcCode,
		BRANCH.brc_name as brcName,
		BRANCH.brc_local as brcLocal
	FROM
		BRANCH  
  </select>    
  
</mapper>